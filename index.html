<!DOCTYPE html>
<html lang="id">
<head>
  <!-- Tambahkan ini di body, misal di atas atau di bawah section -->
<audio id="bgMusic" loop>
  <source src="Beautiful Stranger - Laufey.mp3" type="audio/mpeg">
  Browsermu tidak mendukung audio.
</audio>

<!-- Tombol play/pause -->
<button id="musicBtn" style="position:fixed; top:20px; right:20px; z-index:1000; padding:10px 14px; border-radius:8px; background:#ff4f87; color:white; border:none; cursor:pointer;">
  🎵 Play Music
</button>

<script>
// MEMAINKAN AUDIO
const music=document.getElementById('bgMusic');
const btn=document.getElementById('musicBtn');
btn.addEventListener('click',()=>{
  if(music.paused){ music.play(); btn.textContent="🎵 Pause Music"; }
  else{ music.pause(); btn.textContent="🎵 Play Music"; }
});
</script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Birthday Letter</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{ --scroll:0; }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;scroll-behavior:smooth}
  body{
    font-family:'Quicksand', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    color:#f7f7ff; overflow-x:hidden;
  }

  /* ===== Global bg: transisi pink -> gelap dikendalikan scroll ===== */
  body::before{
    content:"";
    position:fixed; inset:-40% 0 0 0;
    z-index:-2;
    background: linear-gradient(
      180deg,
      #ffd4e3 0%,
      #ffc0d6 20%,
      #b78ad1 45%,
      #5a4aa0 65%,
      #262a52 80%,
      #0d1026 100%
    );
    transform: translateY(calc(-40% * var(--scroll)));
    will-change: transform;
    transition: transform .06s linear;
  }

  section{
    min-height:100vh; display:flex; flex-direction:column;
    align-items:center; justify-content:center; text-align:center;
    padding:24px 18px; position:relative;
  }
  h1,h2{font-family:'Baloo 2', cursive; margin:0 0 12px}
  h1{font-size:clamp(28px, 6vw, 48px)}
  h2{font-size:clamp(22px, 5vw, 36px)}
  p{font-size:clamp(15px, 3.8vw, 18px); max-width:680px; margin:0 auto 16px}

  /* ===== COVER: emoji interaktif + tombol animasi ===== */
  .emoji{
    position:absolute; pointer-events:none; opacity:.9;
    animation: floatUp linear forwards;
    filter: drop-shadow(0 6px 8px rgba(0,0,0,.08));
  }
  @keyframes floatUp{
    from{transform:translateY(20vh) scale(.85); opacity:.0}
    10%{opacity:1}
    to{transform:translateY(-85vh) scale(1.05); opacity:0}
  }
  .btn{
    appearance:none; border:none; cursor:pointer; outline:0;
    background:#ff4f87; color:#fff; border-radius:999px;
    padding:14px 22px; font-size:clamp(16px, 4.2vw, 18px);
    font-family:'Baloo 2', cursive; position:relative; overflow:hidden;
    transform: translateZ(0);
    transition: transform .18s ease, box-shadow .18s ease, background .2s;
    box-shadow: 0 10px 20px rgba(255,79,135,.25);
  }
  .btn:hover{transform:translateY(-2px)}
  .btn:active{transform:scale(.96); box-shadow:0 6px 14px rgba(255,79,135,.28); background:#ff2d73;}
  .btn .sparkle{
    position:absolute; inset:0; pointer-events:none;
    background:
      radial-gradient(circle at 20% 30%, rgba(255,255,255,.8) 0 6px, transparent 7px),
      radial-gradient(circle at 70% 60%, rgba(255,255,255,.7) 0 5px, transparent 6px),
      radial-gradient(circle at 45% 75%, rgba(255,255,255,.6) 0 4px, transparent 5px);
    mix-blend-mode: screen; opacity:0; transform:scale(.8);
    transition:opacity .25s, transform .25s;
  }
  .btn:active .sparkle{opacity:1; transform:scale(1)}

  /* ===== NIGHT SKY: bintang + bulan ===== */
  .night{ color:#f7f7ff; }
  .sky-wrap{ position:absolute; inset:0; overflow:hidden; z-index:-1; }
  canvas#stars{ position:absolute; inset:0; width:100%; height:100%; }
  .moon{
    position:absolute; top:10%; right:8%;
    width:min(22vw,140px); aspect-ratio:1/1; border-radius:50%;
    background:
      radial-gradient(circle at 35% 35%, rgba(255,255,255,.95) 0 45%, rgba(255,255,255,.85) 50%, rgba(240,240,255,.75) 60%, transparent 62%),
      radial-gradient(circle at 60% 60%, rgba(0,0,0,.06) 0 22%, transparent 24%),
      radial-gradient(circle at 30% 70%, rgba(0,0,0,.08) 0 16%, transparent 18%),
      radial-gradient(circle at 70% 30%, rgba(0,0,0,.08) 0 12%, transparent 14%),
      #fff;
    box-shadow: 0 0 30px 8px rgba(255,255,255,.18), 0 0 80px 20px rgba(120,120,255,.12);
  }

  /* ===== FINAL: confetti + teks per kata + glow + parallax emoji ===== */
  .final{ color:#2a2340; }
  .final .glow{
    background: linear-gradient(90deg, #ff88b7, #ffd1dc, #bba8ff);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow: 0 0 18px rgba(255,170,210,.25);
    animation: gentleGlow 3.5s ease-in-out infinite;
  }
  @keyframes gentleGlow{
    0%,100%{filter: drop-shadow(0 0 0 rgba(255,160,220,.0))}
    50%{filter: drop-shadow(0 0 8px rgba(255,160,220,.35))}
  }
  .word{
    display:inline-block; opacity:0; transform:translateY(10px);
    animation: wordIn .6s ease forwards;
  }
  @keyframes wordIn{to{opacity:1; transform:none}}

  /* parallax emoji lembut di final */
  .final .parallax-emoji{
    position:absolute; opacity:.7; font-size:clamp(22px, 6vw, 34px);
    filter: drop-shadow(0 6px 8px rgba(0,0,0,.08));
    transition: transform .1s linear;
  }

  /* ===== Reveal teks saat masuk viewport ===== */
  .reveal{opacity:0; transform:translateY(14px); transition:opacity .7s ease, transform .7s ease}
  .reveal.show{opacity:1; transform:none}

  /* Confetti canvas */
  #confetti{
    position:fixed; inset:0; pointer-events:none; z-index:999; display:none;
  }
</style>
</head>
<body>

<!-- 1) COVER -->
<section id="cover">
  <h1 class="reveal"> Happy Sweet Seventeen Chelsea 🎂</h1>
  <p class="reveal">OMGG UDH ke 17!!! (lebih bagus pake mode desktop)</p> 
  <button class="btn" data-next="#transition">LESGOO🤍 <span class="sparkle"></span></button>
</section>

<!-- 2) TRANSISI (teks saja, latar pakai gradient global) -->
<section id="transition">
  <h2 class="reveal">✨ ✨</h2>
  <p class="reveal">Terima kasih udh ada sejauh ini, aku harap km bisa tetap fokus dengan apa yang kamu tuju sekarang karena aku pengen lihat kamu bisa dapetin apa yang km capai, lalu juga jaga kesehatan juga aku tau sebenarnya kamu gampang sakit, jangan terlalu banyak sedih yaa karena "if i see u happy i'll be happy", terakhir semoga km bisa mendapatkan hal yang lebih baik dari yang sekarang. I'm always proud of everything u achieve..</p>
  <button class="btn" data-next="#night">OKEOKEOEK NEKS 🧚‍♀️ <span class="sparkle"></span></button>
</section>

<!-- 3) NIGHT SKY -->
<section class="night" id="night">
  <div class="sky-wrap">
    <canvas id="stars"></canvas>
    <div class="moon" aria-hidden="true"></div>
  </div>
  <h2 class="reveal">🌝🌝</h2>
  <p class="reveal">Anyway sorry karena aku belum baik ke kamu untuk sejauh ini.<p></p>
  
Semoga dengan bertambah usia ini jadi lebih baik ya, sehat sehattt, banyak maneyy truss.. ohh (°o°:) yang cantik makin cantik asekk, semoga juga tahun depan keterima kedokteran yang kamu mau aku juga pengen lyat km berhasil dengan itu, buat sekarang kurang kurangin stressnya juga walaupun aku gatau yang kamu alamin dikepala cuman aku km bisa survive 🎾 (ni nulisnya sambil main tenis), mungkin kalo akhir akhir ini cape banyak istirahat ya💅 jika suatu hari aku bakal engga disini catatan ini masih ada hehe <p/p> Oya i made something for u tp kasih waktu ya i'll do my best, jujur bingung dari bulan kemarin banyak yang aku pengen beri dan sekarang semua ga sesuai rencana, satu satu gagal terealisasikan..my bad :(. Walaupun sekarang udah dapet cuman bukan something big juga ini. Cukup ah dari pada kepanjangan.
<p></p></p>
  <button class="btn" data-next="#final">LEGSLLO 🤍🤍🤍 <span class="sparkle"></span></button>
</section>

<!-- 4) FINAL SECTION (upgrade) -->
<section class="final" id="final">
  <h2 class="glow" id="finalTitle">🎂 Terima kasih juga buat dirimu sendiri tetap kuat sampai detik ini 🤍Happy Birthday my Beauty Stranger🌺</h2>
  <p id="finalWords" style="max-width:760px"></p>

  <!-- Parallax emoji manis -->
  <span class="parallax-emoji" id="pe1" style="left:8%; top:28%;">🎀</span>
  <span class="parallax-emoji" id="pe2" style="right:10%; top:18%;">🎁</span>
  <span class="parallax-emoji" id="pe3" style="left:14%; bottom:12%;">✨</span>
  <span class="parallax-emoji" id="pe4" style="right:12%; bottom:10%;">☄️</span>
</section>

<!-- Confetti canvas (muncul hanya saat final terlihat) -->
<canvas id="confetti"></canvas>

<script>
/* ===== next buttons + burst emoji ===== */
document.querySelectorAll('.btn[data-next]').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    burstEmojis(btn.closest('section'));
    const target = btn.getAttribute('data-next');
    document.querySelector(target)?.scrollIntoView({behavior:'smooth'});
  });
});

/* ===== emoji interaktif di cover ===== */
const EMOJIS = ["🎂","🎈","🎉","🎁","🤍","✨","🥳"];
const cover = document.getElementById('cover');
let floatTimer;
function spawnFloatEmoji(){
  const e = document.createElement('div');
  e.className = 'emoji';
  e.textContent = EMOJIS[Math.floor(Math.random()*EMOJIS.length)];
  const size = 20 + Math.random()*22;
  e.style.left = Math.random()*100 + 'vw';
  e.style.bottom = '-6vh';
  e.style.fontSize = size + 'px';
  e.style.animationDuration = (3 + Math.random()*3) + 's';
  cover.appendChild(e);
  setTimeout(()=>e.remove(), 6000);
}
const coverObs = new IntersectionObserver(entries=>{
  entries.forEach(en=>{
    if(en.isIntersecting){ floatTimer = setInterval(spawnFloatEmoji, 480); }
    else{ clearInterval(floatTimer); }
  });
},{threshold:.2});
coverObs.observe(cover);

function burstEmojis(scope){
  for(let i=0;i<10;i++){
    setTimeout(()=>{
      const e = document.createElement('div');
      e.className = 'emoji';
      e.textContent = EMOJIS[Math.floor(Math.random()*EMOJIS.length)];
      const rect = scope.getBoundingClientRect();
      const size = 18 + Math.random()*26;
      e.style.left = (rect.left + Math.random()*rect.width) + 'px';
      e.style.top  = (rect.top  + rect.height - 10) + 'px';
      e.style.fontSize = size + 'px';
      e.style.animationDuration = (1.5 + Math.random()*1.2) + 's';
      document.body.appendChild(e);
      setTimeout(()=>e.remove(), 2600);
    }, i*55);
  }
}

/* ===== global gradient mengikuti scroll ===== */
function updateGlobalGradient(){
  const max = document.documentElement.scrollHeight - window.innerHeight;
  const frac = max>0 ? (window.scrollY / max) : 0;
  document.documentElement.style.setProperty('--scroll', frac.toFixed(4));
}
updateGlobalGradient();
window.addEventListener('scroll', updateGlobalGradient, {passive:true});
window.addEventListener('resize', updateGlobalGradient);

/* ===== night sky: stars + meteor ===== */
const canvas = document.getElementById('stars');
const ctx = canvas.getContext('2d');
function sizeCanvas(){ canvas.width = canvas.offsetWidth; canvas.height = canvas.offsetHeight; }
sizeCanvas(); window.addEventListener('resize', sizeCanvas);
const STAR_COUNT = 140;
const stars = Array.from({length: STAR_COUNT}).map(()=>({
  x: Math.random()*canvas.width,
  y: Math.random()*canvas.height,
  r: Math.random()*1.8 + .4,
  a: Math.random(), v: (Math.random()*0.02 + 0.008) * (Math.random()<.5?1:-1)
}));
let meteors = [];
function spawnMeteor(){
  const startX = canvas.width * (0.2 + Math.random()*0.6);
  const startY = -40 - Math.random()*120;
  const speed = 3 + Math.random()*3.5;
  meteors.push({x:startX, y:startY, vx:-speed, vy:speed});
  meteors = meteors.slice(-4);
}
function drawStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(const s of stars){
    s.a += s.v; if(s.a<0.2 || s.a>1) s.v*=-1;
    ctx.globalAlpha = Math.max(0.15, Math.min(1, s.a));
    ctx.fillStyle = '#fff';
    ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill();
    ctx.globalAlpha = .07; ctx.beginPath(); ctx.arc(s.x, s.y, s.r*4, 0, Math.PI*2); ctx.fill();
  }
  ctx.globalAlpha = 1;
  meteors.forEach(m=>{
    m.x += m.vx; m.y += m.vy;
    const len = 120;
    const g = ctx.createLinearGradient(m.x, m.y, m.x - len, m.y - len);
    g.addColorStop(0,'rgba(255,255,255,.95)'); g.addColorStop(1,'rgba(255,255,255,0)');
    ctx.strokeStyle = g; ctx.lineWidth = 2;
    ctx.beginPath(); ctx.moveTo(m.x, m.y); ctx.lineTo(m.x - len, m.y - len); ctx.stroke();
  });
  meteors = meteors.filter(m => m.x > -200 && m.y < canvas.height + 200);
  requestAnimationFrame(drawStars);
}
const night = document.getElementById('night');
const nightObs = new IntersectionObserver(es=>{
  es.forEach(e=>{
    if(e.isIntersecting){
      if(!canvas._running){
        canvas._running = true;
        setInterval(spawnMeteor, 2500 + Math.random()*1500);
        drawStars();
      }
    }
  });
},{threshold:.1});
nightObs.observe(night);

/* ===== reveal teks umum ===== */
const revealObs = new IntersectionObserver(es=>{
  es.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('show'); });
},{threshold:.2});
document.querySelectorAll('#cover h1, #cover p, #transition h2, #transition p, #night h2, #night p')
  .forEach(el=>revealObs.observe(el));

/* ===== FINAL: confetti + type-by-word + parallax ===== */
const final = document.getElementById('final');
const confetti = document.getElementById('confetti');
const cctx = confetti.getContext('2d');

function sizeConfetti(){ confetti.width = innerWidth; confetti.height = innerHeight; }
sizeConfetti(); addEventListener('resize', sizeConfetti);

let pieces = [];
function makeConfetti(){
  pieces = Array.from({length: 160}).map(()=>({
    x: Math.random()*confetti.width,
    y: -20 - Math.random()*confetti.height*0.4,
    w: 6 + Math.random()*6,
    h: 8 + Math.random()*10,
    vy: 1.2 + Math.random()*2.2,
    vx: -0.6 + Math.random()*1.2,
    rot: Math.random()*Math.PI, vr: -0.1 + Math.random()*0.2,
    col: `hsl(${Math.random()*360}, 90%, 60%)`
  }));
}
function drawConfetti(){
  cctx.clearRect(0,0,confetti.width,confetti.height);
  pieces.forEach(p=>{
    p.x += p.vx; p.y += p.vy; p.rot += p.vr;
    cctx.save();
    cctx.translate(p.x, p.y);
    cctx.rotate(p.rot);
    cctx.fillStyle = p.col;
    cctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
    cctx.restore();
  });
  pieces = pieces.filter(p=>p.y < confetti.height+40);
  if(pieces.length) requestAnimationFrame(drawConfetti);
  else confetti.style.display='none';
}

function startConfetti(){
  confetti.style.display='block';
  makeConfetti();
  drawConfetti();
}

/* Type-by-word teks akhir */
const finalText = "";
function typeWords(targetId, text){
  const el = document.getElementById(targetId);
  el.innerHTML = "";
  const words = text.split(" ");
  words.forEach((w, i)=>{
    const span = document.createElement('span');
    span.textContent = w + (i < words.length-1 ? " " : "");
    span.className = 'word';
    span.style.animationDelay = (i*0.08) + 's';
    el.appendChild(span);
  });
}

/* Parallax emoji lembut */
const pe = [document.getElementById('pe1'), document.getElementById('pe2'),
            document.getElementById('pe3'), document.getElementById('pe4')];
function parallaxFinal(ev){
  const x = (ev.clientX || innerWidth/2) / innerWidth - .5;
  const y = (ev.clientY || innerHeight/2) / innerHeight - .5;
  pe.forEach((e, i)=>{
    const depth = (i+1)*4; // beda kedalaman
    e.style.transform = `translate(${x*depth}px, ${y*depth}px)`;
  });
}
final.addEventListener('mousemove', parallaxFinal, {passive:true});
final.addEventListener('touchmove', (e)=>{
  const t = e.touches[0]; if(!t) return;
  parallaxFinal({clientX:t.clientX, clientY:t.clientY});
},{passive:true});

/* Trigger saat final terlihat */
let finalFired = false;
const finalObs = new IntersectionObserver(es=>{
  es.forEach(e=>{
    if(e.isIntersecting && !finalFired){
      finalFired = true;
      startConfetti();
      typeWords('finalWords', finalText);
      document.getElementById('finalTitle').classList.add('reveal','show');
    }
  });
},{threshold:.35});
finalObs.observe(final);
</script>
</body>
</html>
